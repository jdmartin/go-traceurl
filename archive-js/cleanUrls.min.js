window.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("#final-hop"),e=document.querySelector("#final-hop a");e.removeAttribute("href");const n=document.querySelector("#removed-params");if(t){const e=t.querySelector("a").textContent,o=e.lastIndexOf("/"),c=e.substring(0,o+1),s=[];function r(t){let e="",n="";const r=t.lastIndexOf("/")+1,o=t.substring(r),c=o.split(/[?&]/);for(const t of c){const[r,o]=t.split("=");r&&o?i(r)&&(e+=`&${r}=${o}`):n+=t}return e.slice(1).length>0&&(n+="?"+e.slice(1)),n}function i(t){const e=["_kx","cid","ck_subscriber_id","cmpid","ea.tracking.id","fbclid","gclid","linkID","mailId","msclkid","mc_cid","mcID","mc_eid"],n=e.includes(t)||t.startsWith("cm_")||t.startsWith("pk_")||t.startsWith("utm_");return!n||(s.push(t),!1)}let l=r(e);s.sort(),s.length>0&&(n.textContent=s.join(", "));const d=DOMPurify.sanitize(e),a=document.createTextNode(d),u=document.querySelector(".rawFinalUrl"),m=u.querySelector("strong");m.firstChild;u.parentNode.insertBefore(a,u.nextSibling);const f=document.createElement("a"),p=encodeURIComponent(l),h=c+p,b=DOMPurify.sanitize(h),g=b.replace(/%3F/g,"?");f.setAttribute("href",g),f.setAttribute("target","_blank"),f.textContent=`${c}${l}`,t.innerHTML="",t.appendChild(f)}});