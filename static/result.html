<!DOCTYPE html>
<html>

<head>
	<title>URL Tracer - Result</title>
	<link rel="stylesheet" href="/static/css/gotrace.css">
	<script src="./static/js/purify.min.js" nonce="{{.Nonce}}"></script>
	<script src="./static/js/cleanUrls.js" nonce="{{.Nonce}}"></script>
	<script src="./static/js/updateStatuses.js" nonce="{{.Nonce}}"></script>
	<script src="./static/js/downloadHelper.js" nonce="{{.Nonce}}"></script>
</head>

<body id="resultsBody">
	<div class="results-container">
		<table id="resultTable">
			<thead>
				<tr>
					<th colspan="3">
						<h2 class="title">Hops your link traversed:</h2>
					</th>
				</tr>
				<tr class="column-labels">
					<th>Hop</th>
					<th>Status</th>
					<th>URL</th>
				</tr>
			</thead>
			<tbody>
				{{range $i, $hop := .Hops}}
				<tr>
					<td>{{$hop.Number}}</td>
					<td>
						<span class="tooltip-container">
							<span class="status-code">
								<span id="status-button"
									class="status-code-{{$hop.StatusCodeClass}}">{{$hop.StatusCode}}</span>
									<span class="info-icon">i<span class="tooltip"></span></span>
							</span>
						</span>
					</td>
					<td>
						{{if eq $i $.LastIndex}}
						<span id="final-hop"><a href="{{.URL}}" target="_blank" rel="noopener noreferrer">{{.URL}}</a></span>
						{{else}}
						<span class="inert-link">{{.URL}}</span>
						{{end}}
					</td>
				</tr>
				{{end}}
				<tr class="result-info result-info-start">
					<td></td>
					<td></td>
					<td><span class="rawFinalUrl">‚ò¢Ô∏è <strong>Uncleaned Final URL:</strong> </span></td>
				</tr>
				<tr class="result-info">
					<td></td>
					<td></td>
					<td><span>üßô <strong>Parameters Removed from Destination URL:</strong> <span id="removed-params"></span></span></td>
				</tr>
				{{if ne .FinalMessage ""}}
				<tr class="result-info">
					<td></td>
					<td></td>
					<td><span class="final-message">ü•∑ <strong>Secret:</strong> {{.FinalMessage}}</span></td>
				</tr>
				{{end}}
			</tbody>
		</table>
	</div>
		<button class="button-3 dl-button" role="button" id="downloadButton">Download as JSON</button>
		<button class="button-3" role="button"><a href="/">Trace another URL</a></button>
	</div>
</body>

</html>