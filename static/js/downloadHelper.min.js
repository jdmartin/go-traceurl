window.addEventListener("DOMContentLoaded",async()=>{document.getElementById("downloadButton").addEventListener("click",function(){var t=Array.from(document.querySelectorAll("#resultTable tbody tr:not(.result-info)")),e=[];t.forEach(function(t){var n=t.getElementsByTagName("td"),o=n[1].textContent.trim(),r=o.replace(/\D/g,""),a={Hop:n[0].textContent.trim(),Status:r,URL:n[2].textContent.trim()};e.push(a)});var n=document.querySelector(".rawFinalUrl").nextSibling.textContent.trim();console.log(n);var o=document.getElementById("removed-params").textContent,r=o.split(",").map(function(t){return t.trim()}),a={rawFinalURL:n||null,removedParams:r||null},l={Results:e,Meta:a},d=JSON.stringify(l,null,2),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(d)),i.setAttribute("download","gotrace_data.json"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)})});